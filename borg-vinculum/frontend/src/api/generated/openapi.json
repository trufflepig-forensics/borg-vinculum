{"openapi":"3.0.3","info":{"title":"borg-vinculum","description":"","contact":{"name":"Niklas Pfister","email":"git@omikron.dev"},"license":{"name":"MIT"},"version":"0.1.0"},"paths":{"/api/frontend/v1/auth/login":{"post":{"tags":["Authentication"],"summary":"Login to the vinculum","description":"Login to the vinculum\n\nOn successful login you will retrieve a cookie.","operationId":"login","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/LoginRequest"}}},"required":true},"responses":{"200":{"description":"Login successful"},"400":{"description":"Client error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}},"500":{"description":"Server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}}}}},"/api/frontend/v1/auth/logout":{"get":{"tags":["Authentication"],"summary":"Log out of this session","description":"Log out of this session\n\nLogs a logged-in user out of his session.","operationId":"logout","responses":{"200":{"description":"Logout successful"},"400":{"description":"Client error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}},"500":{"description":"Server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}}}}},"/api/frontend/v1/drones":{"get":{"tags":["Drone management"],"summary":"Retrieve all drones from the vinculum","description":"Retrieve all drones from the vinculum","operationId":"get_all_drones","responses":{"200":{"description":"Retrieve all drones","content":{"application/json":{"schema":{"$ref":"#/components/schemas/GetAllDronesResponse"}}}},"400":{"description":"Client error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}},"500":{"description":"Server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}}},"security":[{"session_cookie":[]}]},"post":{"tags":["Drone management"],"summary":"Create a new drone","description":"Create a new drone\n\nThe `name` parameter must be unique for all drones.\n\nA uuid for identification and a bearer token for use in borg drone is returned.","operationId":"create_drone","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateDroneRequest"}}},"required":true},"responses":{"200":{"description":"Created new drone","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateDroneResponse"}}}},"400":{"description":"Client error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}},"500":{"description":"Server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}}},"security":[{"session_cookie":[]}]}},"/api/frontend/v1/drones/{uuid}":{"get":{"tags":["Drone management"],"summary":"Retrieve a drone by its uuid","description":"Retrieve a drone by its uuid\n\nThe parameter `token` is used as bearer token to authenticate the drone to the vinculum.","operationId":"get_drone","parameters":[{"name":"uuid","in":"path","required":true,"schema":{"type":"string","format":"uuid"}}],"responses":{"200":{"description":"Retrieve the selected drone","content":{"application/json":{"schema":{"$ref":"#/components/schemas/GetDroneResponse"}}}},"400":{"description":"Client error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}},"500":{"description":"Server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}}},"security":[{"session_cookie":[]}]},"delete":{"tags":["Drone management"],"summary":"Delete a drone by its uuid","description":"Delete a drone by its uuid","operationId":"delete_drone","parameters":[{"name":"uuid","in":"path","required":true,"schema":{"type":"string","format":"uuid"}}],"responses":{"200":{"description":"Drone got deleted"},"400":{"description":"Client error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}},"500":{"description":"Server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiErrorResponse"}}}}},"security":[{"session_cookie":[]}]}}},"components":{"schemas":{"ApiErrorResponse":{"type":"object","description":"The Response that is returned in case of an error\n\nFor client errors the HTTP status code will be 400,\nfor server errors the 500 will be used.","required":["message","status_code"],"properties":{"message":{"type":"string","example":"Error message is here"},"status_code":{"$ref":"#/components/schemas/ApiStatusCode"}}},"ApiStatusCode":{"type":"integer","description":"The status code represents a unique identifier for an error.\n\nError codes in the range of 1000..2000 represent client errors\nthat could be handled by the client.\nError codes in the range of 2000..3000 represent server errors.","enum":[1000,1001,1002,1003,1004,1005,1006,1007,1008,1009,1010,1011,2000,2001,2002]},"CreateDroneRequest":{"type":"object","description":"The request to create a new drone","required":["name","repository","passphrase"],"properties":{"name":{"type":"string","example":"one_of_nine"},"repository":{"type":"string","example":"user@example.com:server/1_of_9"},"passphrase":{"type":"string","example":"super_secure_passphrase"}}},"CreateDroneResponse":{"type":"object","description":"The response of a request to create a drone","required":["uuid","token"],"properties":{"uuid":{"type":"string","format":"uuid"},"token":{"type":"string","example":"bearer_token_be_here"}}},"GetAllDronesResponse":{"type":"object","description":"All available drones in the vinculum","required":["drones"],"properties":{"drones":{"type":"array","items":{"$ref":"#/components/schemas/GetDroneResponse"}}}},"GetDroneResponse":{"type":"object","description":"The representation of a single drone.\n\nThe parameter `token` is used as bearer token to authenticate the drone to the vinculum.","required":["uuid","name","active","token","repository","created_at"],"properties":{"uuid":{"type":"string","format":"uuid"},"name":{"type":"string","example":"one_of_nine"},"active":{"type":"boolean"},"token":{"type":"string","example":"bearer_token_will_be_here"},"repository":{"type":"string","example":"user@example.com:server/one_of_nine"},"created_at":{"type":"string","format":"date-time"}}},"LoginRequest":{"type":"object","description":"The request to login","required":["username","password"],"properties":{"username":{"type":"string","example":"seven_of_nine"},"password":{"type":"string","example":"010001010110101010101010101"}}}},"securitySchemes":{"session_cookie":{"type":"apiKey","in":"cookie","name":"id"}}}}
